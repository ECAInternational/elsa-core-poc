{"id":"40279cfa5cacffa9","definitionId":"89364c19b25f3a35","name":"Document Approval With Reminders","createdAt":"2024-10-24T10:23:37.848544+00:00","version":1,"toolVersion":"3.2.0.0","variables":[{"id":"1c6cf9c82c0c6e06","name":"DocumentSigningRetryCount","typeName":"Int32","isArray":false,"value":"0","storageDriverTypeName":"Elsa.Workflows.Services.WorkflowInstanceStorageDriver, Elsa.Workflows.Core"},{"id":"e0fceb85e4b752cc","name":"DocumentSigned","typeName":"Boolean","isArray":false,"value":"False","storageDriverTypeName":"Elsa.Workflows.Services.WorkflowInstanceStorageDriver, Elsa.Workflows.Core"}],"inputs":[],"outputs":[],"outcomes":[],"customProperties":{},"isReadonly":false,"isSystem":false,"isLatest":true,"isPublished":false,"options":{"autoUpdateConsumingWorkflows":false},"root":{"type":"Elsa.Flowchart","version":1,"id":"a2d5622db35b938","nodeId":"Workflow1:a2d5622db35b938","metadata":{},"customProperties":{"source":"FlowchartJsonConverter.cs:45","notFoundConnections":[],"canStartWorkflow":false,"runAsynchronously":false},"activities":[{"id":"92fb04ab997d4aea","nodeId":"Workflow1:a2d5622db35b938:92fb04ab997d4aea","name":"Start1","type":"Elsa.Start","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":-170.015625,"y":-80.5},"size":{"width":101.6484375,"height":50}}}},{"text":{"typeName":"String","expression":{"type":"Literal","value":"Huraah - SIGNED!"}},"id":"cf21c5a9efcb80e7","nodeId":"Workflow1:a2d5622db35b938:cf21c5a9efcb80e7","name":"WriteLine1","type":"Elsa.WriteLine","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":790.703125,"y":-130.5},"size":{"width":116.578125,"height":50}},"displayText":"Signed"}},{"text":{"typeName":"String","expression":{"type":"Literal","value":"Now what - NOT SIGNED"}},"id":"3c4e0523f8714c20","nodeId":"Workflow1:a2d5622db35b938:3c4e0523f8714c20","name":"NotSigned","type":"Elsa.WriteLine","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":790.703125,"y":30},"size":{"width":138.625,"height":50}}}},{"condition":{"typeName":"Boolean","expression":{"type":"JavaScript","value":"getVariable(\u0027DocumentSigningRetryCount\u0027) \u003C 3 \u0026\u0026 getVariable(\u0027DocumentSigned\u0027) !== true"}},"body":{"type":"Elsa.Flowchart","version":1,"id":"522a82daeb782f5","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5","metadata":{},"customProperties":{"source":"FlowchartJsonConverter.cs:45","notFoundConnections":[],"canStartWorkflow":false,"runAsynchronously":false},"activities":[{"branches":{"typeName":"String[]","expression":{"type":"Object","value":"[\u0022request\u0022,\u0022timeout\u0022]"}},"id":"460afd848d878b09","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:460afd848d878b09","name":"FlowFork1","type":"Elsa.FlowFork","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":-420,"y":60},"size":{"width":144.3515625,"height":50}}}},{"variable":{"id":"1c6cf9c82c0c6e06","name":"DocumentSigningRetryCount","typeName":"Int32","value":"0","storageDriverTypeName":"Elsa.Workflows.Services.WorkflowInstanceStorageDriver, Elsa.Workflows.Core"},"value":{"typeName":"Object","expression":{"type":"JavaScript","value":"getVariable(\u0027DocumentSigningRetryCount\u0027) \u002B 1"}},"id":"71678b336c700841","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:71678b336c700841","name":"SetVariable2","type":"Elsa.SetVariable","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":-720,"y":60},"size":{"width":215.625,"height":50}},"displayText":"Increase Retry Count"}},{"mode":{"typeName":"Elsa.Workflows.Activities.Flowchart.Models.FlowJoinMode, Elsa.Workflows.Core","expression":{"type":"Literal","value":"WaitAny"}},"id":"56c6582bcaa53f5d","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:56c6582bcaa53f5d","name":"FlowJoin1","type":"Elsa.FlowJoin","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":716.54736328125,"y":60},"size":{"width":97.78125,"height":50}}}},{"variable":{"id":"e0fceb85e4b752cc","name":"DocumentSigned","typeName":"Boolean","value":"False","storageDriverTypeName":"Elsa.Workflows.Services.WorkflowInstanceStorageDriver, Elsa.Workflows.Core"},"value":{"typeName":"Object","expression":{"type":"CSharp","value":"((System.Text.Json.JsonElement)Output.Get(\u0022SendDocumentForSigning\u0022, \u0022Result\u0022)).GetProperty(\u0022signed\u0022).GetBoolean()"}},"id":"e3a2f4c7128842b0","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:e3a2f4c7128842b0","name":"SetVariable1","type":"Elsa.SetVariable","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":460,"y":-20},"size":{"width":217.890625,"height":50}},"displayText":"Set Signing Outcome"}},{"timeSpan":null,"id":"a6ca16fb1d22cd6e","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:a6ca16fb1d22cd6e","name":"Delay1","type":"Elsa.Delay","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":136.54739379882812,"y":129.5},"size":{"width":106.375,"height":50}}}},{"script":{"typeName":"String","expression":{"type":"Literal","value":"return ((System.Text.Json.JsonElement)Output.Get(\u0022SendDocumentForSigning\u0022, \u0022Result\u0022)).GetRawText();"}},"possibleOutcomes":null,"result":null,"id":"85325a3637b1d309","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:85325a3637b1d309","name":"CastResult","type":"Elsa.RunCSharp","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":96.54739379882812,"y":-40},"size":{"width":85.5859375,"height":50}}}},{"taskName":{"typeName":"String","expression":{"type":"JavaScript","value":"\u0060SignDocument-${getVariable(\u0027DocumentSigningRetryCount\u0027)}\u0060"}},"payload":null,"result":null,"id":"ed9022b839d070da","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:ed9022b839d070da","name":"SendDocumentForSigning","type":"Elsa.RunTask","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":-200,"y":-40},"size":{"width":262.6640625,"height":50}},"displayText":"Send Document for Signing"}},{"text":{"typeName":"String","expression":{"type":"CSharp","value":"Output.Get(\u0022CastResult\u0022, \u0022Result\u0022)"}},"id":"d468aa2d8b4f6a7e","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad:522a82daeb782f5:d468aa2d8b4f6a7e","name":"WriteLine1","type":"Elsa.WriteLine","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":242.92239379882812,"y":-40},"size":{"width":138.625,"height":50}}}}],"connections":[{"source":{"activity":"71678b336c700841","port":"Done"},"target":{"activity":"460afd848d878b09","port":"In"}},{"source":{"activity":"460afd848d878b09","port":"request"},"target":{"activity":"ed9022b839d070da","port":"In"}},{"source":{"activity":"460afd848d878b09","port":"timeout"},"target":{"activity":"a6ca16fb1d22cd6e","port":"In"}},{"source":{"activity":"a6ca16fb1d22cd6e","port":"Done"},"target":{"activity":"56c6582bcaa53f5d","port":"In"}},{"source":{"activity":"d468aa2d8b4f6a7e","port":"Done"},"target":{"activity":"e3a2f4c7128842b0","port":"In"}},{"source":{"activity":"e3a2f4c7128842b0","port":"Done"},"target":{"activity":"56c6582bcaa53f5d","port":"In"}},{"source":{"activity":"ed9022b839d070da","port":"Done"},"target":{"activity":"85325a3637b1d309","port":"In"}},{"source":{"activity":"85325a3637b1d309","port":"Done"},"target":{"activity":"d468aa2d8b4f6a7e","port":"In"}}]},"id":"2408c563f2ff89ad","nodeId":"Workflow1:a2d5622db35b938:2408c563f2ff89ad","name":"While1","type":"Elsa.While","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":107.984375,"y":-115.5},"size":{"width":219.46875,"height":120}}}},{"condition":{"typeName":"Boolean","expression":{"type":"JavaScript","value":"getVariable(\u0027DocumentSigned\u0027) === true"}},"id":"dc9c5c5b69138ffa","nodeId":"Workflow1:a2d5622db35b938:dc9c5c5b69138ffa","name":"FlowDecision1","type":"Elsa.FlowDecision","version":1,"customProperties":{"canStartWorkflow":false,"runAsynchronously":false},"metadata":{"designer":{"position":{"x":460.703125,"y":-80.5},"size":{"width":128.8515625,"height":50}}}}],"connections":[{"source":{"activity":"2408c563f2ff89ad","port":"Done"},"target":{"activity":"dc9c5c5b69138ffa","port":"In"}},{"source":{"activity":"dc9c5c5b69138ffa","port":"True"},"target":{"activity":"cf21c5a9efcb80e7","port":"In"}},{"source":{"activity":"dc9c5c5b69138ffa","port":"False"},"target":{"activity":"3c4e0523f8714c20","port":"In"}},{"source":{"activity":"92fb04ab997d4aea","port":"Done"},"target":{"activity":"2408c563f2ff89ad","port":"In"}}]}}